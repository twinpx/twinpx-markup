$(function(){new Sliding($("#sliding"));appendCache(window.location.pathname);browserNavigation();new ScrolledMenu($(".b-scrolled-menu__type_main-submenu"));new MainMenu;contactsNav();portfolioTags();$(window).resize(windowResize).resize();onHtmlReady();onPageLoad(true);new FixedPanel("#b-fixed-panel");$("#contacts-bar .b-phone-icon").click(function(e){var t=$("body");if(!t.hasClass("i-cover")){t.addClass("i-cover");if(!$("#sliding #cover").length){$("#sliding").append('<div id="cover"></div>')}e.stopPropagation()}e.preventDefault()});$(document).bind("click",function(e){var t=$("body");if(t.hasClass("i-cover")){t.removeClass("i-cover");$("#cover").remove()}});$("#contacts-panel").click(function(e){e.stopPropagation()})});function Form(e){var t=this;n();function n(){i();a()}function i(){t.$elem=$(e);t.$elem.data("Form",t);t.submitFlag=0;t.firstElement=null;t.$submitButton=t.$elem.find(".b-form-submit .b-button");t.$messageBackLink=t.$elem.find(".b-form-message__back")}function a(){t.$submitButton.click(s);t.$elem.submit(c);t.$elem.find("input, textarea").focus(l).keyup(r);if(t.$messageBackLink.length){t.$messageBackLink.click(o)}}function o(e){e.preventDefault();$.ajax({url:t.$messageBackLink.attr("href"),type:"GET",dataType:"html",success:function(e){if(typeof e==="string"){t.$elem.fadeOut(500,function(){var n=$(e);t.$elem.before(n.fadeIn()).remove();t=null;n.find("[data-placeholder]").placeholder();new Form(n)})}},error:ajaxError})}function r(e){if(this.tagName=="TEXTAREA"&&e.which==13&&e.ctrlKey==true){t.$elem.submit();e.preventDefault()}}function l(){}function s(e){t.$elem.submit();e.preventDefault()}function c(e){if(d()){if(!t.$elem.attr("data-ajax-url"))return true;$.ajax({url:t.$elem.attr("data-ajax-url"),type:"POST",data:t.$elem.serialize(),dataType:"json",success:function(e){if(e.message){t.$elem.find(".b-form-message h2").text(e.message)}if(e.url){t.$elem.find(".b-form-message__back").attr({href:e.url})}t.$elem.addClass("i-message")},error:ajaxError})}e.preventDefault()}function f(e){e.closest(".b-form-field").addClass("i-attention");if(t.submitFlag==0){t.firstElement=e}t.submitFlag=1}function u(e){e.closest(".b-form-field").removeClass("i-attention")}function d(){return e();function e(){t.submitFlag=0;t.firstElement=null;i();a();o();n();i();if(t.submitFlag==0)return true;var e=window.pageYOffset||document.documentElement.scrollTop;if(t.firstElement.offset().top-e<0){$.scrollTo(t.firstElement.parent().offset().top-100,10)}if(t.firstElement!=null){t.firstElement.focus()}return false}function n(){var e={};t.$elem.find("[data-equal]").each(function(){var n=$(this),i=n.attr("data-equal");if(!e[i]){e[i]=t.$elem.find("[data-equal="+i+"]")}});var n;for(var i in e){n=true;var a=$.trim($(e[i][0]).val());e[i].each(function(){if($.trim($(this).val())!=a){n=false}});if(!n){e[i].each(function(){f($(this))})}else{e[i].each(function(){u($(this))})}}}function i(){t.$elem.find(".b-select.i-required").each(function(){if($(this).find("input:hidden").val()==""){f($(this))}else{u($(this))}});t.$elem.find("[required]").each(function(){var e=$(this),t=$.trim(e.val());if(e.is("[type=radio]")){if(e.closest(".b-form-field").find("input:checked").size()==0)f(e)}else if(e.is("[type=checkbox]")){if(!e.is(":checked")){f(e)}else{u(e)}}else if(e.is("[data-equal]")){if(t=="")f(e)}else if(e.is("[type=password]")){if(t.length<6){f(e)}else{u(e)}}else if(t==""){f(e)}else if(!e.is("[type=email]")&&!e.is("[type=tel]")&&!e.is("[type=number]")&&!e.is("[type=url]")){u(e)}})}function a(){e();n();i();a();o();function e(){t.$elem.find("input:visible[type=password]").each(function(){var e=$(this),t=$.trim(e.val()),n=6;if(t.length<n){f(e)}else{u(e)}})}function n(){t.$elem.find("[type=email]").each(function(){var e=$(this),t=$.trim(e.val()),n=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;if(t!=""&&!n.test(t)){f(e)}else{u(e)}})}function i(){t.$elem.find("[type=tel]").each(function(){var e=$(this),t=$.trim(e.val()),n=/^([0-9-()\++\s]{5,})$/i;if(t!=""&&!n.test(t)){f(e)}else{u(e)}})}function a(){t.$elem.find("[type=number]").each(function(){var e=$(this),t=$.trim(e.val()),n=/^([0-9\s\.,]+)$/i;if(t!=""&&!n.test(t)){f(e)}else{u(e)}})}function o(){t.$elem.find("[type=url]").each(function(){var e=$(this),t=$.trim(e.val()),n=/^((https?:\/\/)?(www\.)?([-a-z0-9]+\.)+[a-z]{2,})$/i;if(t!=""&&!n.test(t)){f(e)}else{u(e)}})}}function o(){var e={};t.$elem.find("[data-required-or]").each(function(){var n=$(this),i=n.attr("data-required-or");if(!e[i]){e[i]=t.$elem.find("[data-required-or="+i+"]")}});var n;for(var i in e){n=0;e[i].each(function(){if($.trim($(this).val())!=""){n++}});if(n==0){e[i].each(function(){f($(this))})}else{e[i].each(function(){u($(this))})}}}}}(function(e){var t={};e.fn.placeholder=function(n){var i=e.extend({},t,n);e(this).each(function(){var t=this;t.$elem=e(this),t.$formField=t.$elem.closest(".b-form-field");t.placeholderText=i.text||t.$elem.attr("data-placeholder");n();function n(){if(!t.$placeholder){r()}a();o()}function a(){setTimeout(function(){if(t.$elem.val()==""){t.$formField.addClass("i-placeholder")}},10)}function o(){t.$placeholderText.click(function(){if(!t.$elem.parent().hasClass("i-disabled"))t.$elem.focus()});t.$elem.focus(function(){s()}).blur(function(){c()})}function r(){t.$placeholder=e('<div class="b-form-field__placeholder"><div class="b-form-field__placeholder__text">'+t.placeholderText+"</div></div>");t.$placeholderText=t.$placeholder.find(".b-form-field__placeholder__text");t.$elem.before(t.$placeholder);l()}function l(){if(t.$elem.is(":visible")){i()}else{var e=t.$elem;var n=e.parent();e.css({position:"absolute",bottom:"0",left:"0"}).appendTo("body");i();n.append(e);e.css({position:"static",bottom:"none",left:"none"})}function i(){t.$placeholderText.css({width:t.$elem.outerWidth()-parseInt(t.$placeholderText.css("paddingLeft"))+"px"})}}function s(){t.$formField.removeClass("i-placeholder")}function c(){if(t.$elem.val()==""){t.$formField.addClass("i-placeholder")}}});return this}})(jQuery);function FixedPanel(e){var t=this;n();function n(){i();a()}function i(){t.$elem=$(e);t.$elem.data("FixedPanel",t);t.$panel=t.$elem.find(".b-fp__panel");t.panelTopBorder=parseInt(t.$elem.css("top"),10)}function a(){$(window).bind("scroll",o).scroll()}function o(e){var n=r();if(n>t.panelTopBorder&&!t.$elem.hasClass("i-scrolled")){t.$elem.addClass("i-scrolled");l()}else if(n<=t.panelTopBorder&&t.$elem.hasClass("i-scrolled")){s();t.$elem.removeClass("i-scrolled")}}function r(){return window.pageYOffset||document.documentElement.scrollTop}function l(){var e=$("#sliding").css("backgroundColor");t.$panel.css({backgroundColor:e})}function s(){t.$panel.css({backgroundColor:"transparent"})}this._setBgColor=function(){l()};this._resetBgColor=function(){s()}}function portfolioTags(){$("#sliding").delegate("a.b-tags__item","click",e);function e(e){e.preventDefault();e.stopPropagation();var t=$(this).text();$("#sliding .b-portfolio__item").fadeOut(300,function(){$("#sliding .b-tags__item").each(function(){if($(this).text()==t){$(this).closest(".b-portfolio__item").fadeIn(500)}})});$(".b-main-menu__link.i-active").removeClass("i-active").addClass("i-inside")}}function browserNavigation(){$("section.b-content").delegate("a","click",e);window.pageHref;function e(e){if(isMobile())return;var t=$(this);var n=t.attr("href");var i=window.location.hostname;var a=n.split("?")[0];if(t.hasClass("b-share-buttons__item")){if(t.hasClass("i-vk")){window.open(t.attr("href"),"","width=540,height=450");return false}else if(t.hasClass("i-fb")){window.open(t.attr("href"),"","width=540,height=450");return false}}if(t.hasClass("i-no-ajax")||n.search("://")!=-1&&a.search(i)==-1||n=="#"||n.search("skype")!=-1||n.search("mailto")!=-1)return true;window.pageUrl=n;setTimeout(function(){if(n&&window.pageUrl==n){if(t.hasClass("i-active"))return;var e=history.state||{};if(t.hasClass("b-logo__link")){$("#main-menu a, #main-submenu a, #person-submenu a").removeClass("i-active");$("#main-submenu menu, #person-submenu").fadeOut()}$("#sliding").data("Sliding").slide(n)}},500);e.preventDefault()}$(window).on("popstate",function(e){if(isMobile())return;window.historyPopstateFlag=true;var t=history.location||document.location;if(t)$("#sliding").data("Sliding").slide(t)})}function isMobile(){if($("body").hasClass("i-ipad")||$("body").hasClass("i-iphone")||$("body").hasClass("i-android")||$(document).width()<=480)return true;return false}function onHtmlReady(){$(".b-main-menu-block").data("MainMenu").highlight();$(".b-main-menu-block").data("MainMenu").showMenu()}function onPageLoad(e){checkWidget();adaptiveBlocks();pushHistory(e);setPageMeta();$("[data-placeholder]").placeholder();$("form").each(function(){if($(this).data("Form"))return;new Form(this)})}function pushHistory(e){if(e)return;if(window.historyPopstateFlag){window.historyPopstateFlag=false;return}var t=$("#sliding").data("Sliding").$slidingContent.attr("data-url");if(t)history.pushState(null,null,t)}function setPageMeta(){var e=$("#sliding").data("Sliding").$slidingContent;var t=e.attr("data-title");var n=e.attr("data-keywords");var i=e.attr("data-description");$("title").text(t);$("meta[name=keywords]").text(n);$("meta[name=description]").text(i)}function appendCache(e){if($("#sliding").data("Sliding").cache[e])return;$("#sliding").data("Sliding").cache[e]=$("#sliding").html()}function adaptiveBlocks(){$(window).unbind("resize.adaptive");$(".b-adaptive-blocks").each(function(){e(this)});function e(e){var t=$(e);var n=t.children("[class*=item]");var i=n.width();var a=$(e).width();$(window).bind("resize.adaptive",r).resize();function o(){return 100/Math.floor(a/i)}function r(){a=$(e).width();n.width(o()+"%")}}}function checkWidget(){$("#sliding").find("[data-widget]").each(function(){var e=$(this).attr("data-widget");if(e&&window[e]&&typeof window[e]=="function"){window[e]($(this))}})}function windowResize(){var e=[1366,1280,768,320,0];var t=$(window).width();for(var n=0;n<e.length-1;n++){if(t<e[n]&&t>e[n+1]){$("body").addClass("i-"+e[n])}else{$("body").removeClass("i-"+e[n])}}}function ScrolledMenu(e){var t=this;n();function n(){i();a()}function i(){t.$elem=e;t.$elem.data("ScrolledMenu",t);t.$content=t.$elem.find(".b-scrolled-menu__content");t.$wrapper=t.$elem.find(".b-scrolled-menu__wrapper");t.$navTop=t.$elem.find(".b-scrolled-menu__nav-top");t.$navBottom=t.$elem.find(".b-scrolled-menu__nav-bottom");t.intervalId;t.intervalCounter=1}function a(){t.$elem.delegate(".b-scrolled-menu__nav-top","mouseenter",o).delegate(".b-scrolled-menu__nav-top","mouseleave",r).delegate(".b-scrolled-menu__nav-top","click",false).delegate(".b-scrolled-menu__nav-bottom","mouseenter",o).delegate(".b-scrolled-menu__nav-bottom","mouseleave",r).delegate(".b-scrolled-menu__nav-bottom","click",false);t.$wrapper.mousewheel(function(e){if(!t.$elem.hasClass("i-top")&&!t.$elem.hasClass("i-bottom"))return;e.preventDefault();t.intervalCounter=100;if(e.deltaY>0)l(true);else if(e.deltaY<0)l(false)})}function o(){if(isMobile())return;var e=$(this);var n=true;t.intervalCounter=1;if(e[0].className.search("bottom")!=-1)n=false;if(t.intervalId)clearInterval(t.intervalId);t.intervalId=setInterval(function(){l(n)},20)}function r(){if(isMobile())return;var e=$(this);var n=true;t.intervalCounter=1;if(e[0].className.search("bottom")!=-1)n=false;if(t.intervalId)clearInterval(t.intervalId);t.intervalId=setInterval(function(){s(n)},30)}function l(e){if(t.intervalCounter<3)t.intervalCounter+=.2;c(e)}function s(e){if(t.intervalCounter<=1&&t.intervalId){clearInterval(t.intervalId);return}t.intervalCounter-=.2;c(e)}function c(e){var n=parseInt(t.$content.css("marginTop"),10);if(e){n+=Math.ceil(Math.log(t.intervalCounter)*4);if(n>=0){n=0;if(t.intervalId)clearInterval(t.intervalId);t.$elem.removeClass("i-top").addClass("i-bottom")}else{t.$elem.addClass("i-top").addClass("i-bottom")}}else{n-=Math.ceil(Math.log(t.intervalCounter)*4);if(n<=-1*(t.$content.height()-t.$wrapper.height())){n=-1*(t.$content.height()-t.$wrapper.height());if(t.intervalId)clearInterval(t.intervalId);t.$elem.removeClass("i-bottom").addClass("i-top")}else{t.$elem.addClass("i-top").addClass("i-bottom")}}t.$content.css({marginTop:n+"px"})}}function Clients(e){var t=this;n();function n(){i();a()}function i(){t.$elem=e;t.$elem.data("Clients",t)}function a(){t.$elem.delegate(".b-clients__item","mouseenter",o).delegate(".b-clients__item","mouseleave",r)}function o(){$(this).find(".b-clients__item__bg").stop().animate({opacity:.87},500).end().find(".b-clients__item__name").stop().animate({top:"50%"},800,"easeOutElastic")}function r(){$(this).find(".b-clients__item__bg").stop().animate({opacity:0},500).end().find(".b-clients__item__name").stop().animate({top:"-40px"},500,"easeInQuad")}}function Sliding(e){var t=this;n();function n(){i();a()}function i(){t.$elem=$(e);t.$elem.data("Sliding",t);t.$slidingContent=t.$elem.find(".b-sliding-content");t.pageHtml=undefined;t.cache={};t.slideFlag=false;t.fadeFlag=false}function a(){}function o(e){n(e);i();function n(e){t.pageHtml=undefined;n();function n(){if(!t.cache[e]){$.ajax({url:e+"?ajax",type:"GET",dataType:"html",success:n,error:ajaxError})}else{t.pageHtml=t.cache[e]}function n(n,i,a){setTimeout(function(){t.pageHtml=n;if(t.$elem.hasClass("i-preloader")){t.$elem.removeClass("i-preloader").html(t.pageHtml);onHtmlReady();appendCache(e);t.$slidingContent=t.$elem.find(".b-sliding-content");t.$slidingContent.hide().fadeIn(500,function(){t.fadeFlag=true;if(t.slideFlag)onPageLoad()})}},0)}}}function i(){$(".b-main-menu-block").data("MainMenu").hideMenu();if(t.$slidingContent.size()!=0){t.$slidingContent.fadeOut(500,function(){t.$elem.attr({"data-marginLeft":t.$elem.css("marginLeft")});t.$elem.animate({marginLeft:$(document).width()},500,"easeInQuad",a);$("#b-fixed-panel").data("FixedPanel")._resetBgColor()})}else{t.$elem.attr({"data-marginLeft":t.$elem.css("marginLeft")});t.$elem.animate({marginLeft:$(document).width()},500,"easeInQuad",a)}}function a(){t.slideFlag=false;t.fadeFlag=false;var n="450px";if(t.$elem.attr("data-marginLeft"))n=t.$elem.attr("data-marginLeft");t.$slidingContent.empty();t.$elem.animate({marginLeft:n},1e3,"easeOutQuad",function(){t.$elem.attr({style:""});i()});function i(){t.slideFlag=true;if(t.pageHtml){t.$elem.html(t.pageHtml);onHtmlReady();appendCache(e);t.$slidingContent=t.$elem.find(".b-sliding-content");t.$slidingContent.hide().fadeIn(500,function(){t.fadeFlag=true;if(t.slideFlag)onPageLoad();$("#b-fixed-panel").data("FixedPanel")._setBgColor()})}else{t.$elem.addClass("i-preloader")}}}}this.slide=function(e){o(e)}}function MainMenu(){var e=this;t();function t(){n();i()}function n(){e.$elem=$(".b-main-menu-block");e.$elem.data("MainMenu",e);e.$mainMenu=$("#main-menu");e.$mainSubmenu=$("#main-submenu");e.$menuIcons=$(".b-menu-icon")}function i(){e.$elem.delegate("a","mouseenter",a).delegate("a","mouseleave",o);e.$menuIcons.click(r)}function a(){}function o(){}function r(t){t.preventDefault();t.stopPropagation();if(e.$mainMenu.is(":visible")){e.$mainMenu.stop().slideUp()}else{e.$mainMenu.stop().slideDown();$.scrollTo(0)}}function l(){var t=e.$mainSubmenu.find(".i-active");if(t.size()==0)t=e.$mainSubmenu.find(".i-inside");if(t.is(":visible"))return;var n=e.$mainMenu.find(".i-active");if(n.size()==0)n=e.$mainMenu.find(".i-inside");if(e.$mainSubmenu.find(".b-main-submenu:visible").size()!=0){e.$mainSubmenu.find(".b-main-submenu:visible").fadeOut(300,function(){s(n)})}else{s(n)}}function s(t){e.$mainSubmenu.css({marginTop:0});u();if(t.size()==0)return;var n=t.parent().attr("data-dir");if(n){e.$mainSubmenu.find("[data-dir="+n+"]").fadeIn(500,function(){u()})}}function c(){e.$mainSubmenu.find("menu").fadeOut()}function f(){e.$elem.find("a").removeClass("i-active").removeClass("i-inside");var t=$(".b-sliding-content").attr("data-url");if(!t)return;e.$mainSubmenu.find("a").each(function(){var e=$(this);var n=e.attr("href");if(t==n){e.addClass("i-active")}else if(t.search(n)!=-1){e.addClass("i-inside")}});e.$mainMenu.find("a").each(function(){var n=$(this);var i=e.$mainSubmenu.find(".i-active");if(i.size()==0)i=e.$mainSubmenu.find(".i-inside");if(i.size()==0){if(n.attr("href")==t)n.addClass("i-active");return}var a=i.closest("menu").attr("data-dir");if(a&&a==n.parent().attr("data-dir"))n.addClass("i-inside")})}function u(){var e=$(".b-scrolled-menu__type_main-submenu").data("ScrolledMenu");if(e.$content.height()>e.$wrapper.height()){e.$elem.addClass("i-bottom")}else{e.$elem.removeClass("i-top").removeClass("i-bottom")}}this.highlight=function(){f()};this.showMenu=function(){l()};this.makeScrolled=function(){u()};this.hideMenu=function(){c()}}function contactsNav(){var e=$("#b-contacts-nav");var t=e.find(".b-contacts-nav__bg");var n=e.find(".b-contacts-nav__item__text");var i=e.find(".i-phone");var a=e.find(".i-mail");var o=e.find(".i-skype");var r=false;e.mouseenter(l).mouseleave(s);function l(){if(isMobile())return;r=true;setTimeout(function(){if(r){t.fadeIn();n.fadeIn();a.stop().animate({left:"300px"},500,"easeOutQuad");o.stop().animate({left:"550px"},500,"easeOutQuad")}},100)}function s(){if(isMobile())return;r=false;t.fadeOut();n.fadeOut();a.stop().animate({left:"100px"},500,"easeOutQuad");o.stop().animate({left:"150px"},500,"easeOutQuad")}}function contacts(){if(!document.getElementById("contacts__map"))return;var e=$("#contacts__map");var t=$("#contacts__map-link");var n=e.find(".b-contacts__map__sliding");t.click(o);n.click(r);var i;ymaps.ready(a);function a(){i=new ymaps.Map("contacts__map",{center:[55.773251,37.498564],zoom:16});i.controls.add("zoomControl",{left:60,top:5});myPlacemark=new ymaps.Placemark([55.773251,37.498564],{balloonContentHeader:"Студия Twin px",balloonContentBody:"Наш адрес: Улица Мневники, дом 3, корпус 1, вход со стороны 2-го Силикатного проезда<br>Москва, Россия, 123308.<br>Офис 224.",balloonContentFooter:"",hintContent:""});i.geoObjects.add(myPlacemark)}function o(t){t.preventDefault();t.stopPropagation();e.show().stop().animate({left:"0"},800,"easeOutQuad",function(){i.container.fitToViewport()})}function r(t){t.preventDefault();t.stopPropagation();e.stop().animate({left:"100%"},800,"easeOutQuad",function(){e.hide()})}}function Portfolio(e){var t=this;n();function n(){i();a()}function i(){t.$elem=e;t.$elem.data("Portfolio",t)}function a(){t.$elem.delegate(".b-portfolio__item__link","mouseenter",o).delegate(".b-portfolio__item__link","mouseleave",r)}function o(){$(this).find(".b-portfolio__item__link__bg").stop().animate({opacity:.75},500).end().find(".b-portfolio__item__link__name").stop().animate({top:"25px"},800,"easeOutElastic")}function r(){$(this).find(".b-portfolio__item__link__bg").stop().animate({opacity:0},500).end().find(".b-portfolio__item__link__name").stop().animate({top:"-40px"},500,"easeInQuad")}}(function(e){var t=e.scrollTo=function(t,n,i){e(window).scrollTo(t,n,i)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:true};t.window=function(t){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||i.compatMode=="BackCompat"?i.body:i.documentElement})};e.fn.scrollTo=function(i,a,o){if(typeof a=="object"){o=a;a=0}if(typeof o=="function")o={onAfter:o};if(i=="max")i=9e9;o=e.extend({},t.defaults,o);a=a||o.duration;o.queue=o.queue&&o.axis.length>1;if(o.queue)a/=2;o.offset=n(o.offset);o.over=n(o.over);return this._scrollable().each(function(){if(i==null)return;var r=this,l=e(r),s=i,c,f={},u=l.is("html,body");switch(typeof s){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(s)){s=n(s);break}s=e(s,this);if(!s.length)return;case"object":if(s.is||s.style)c=(s=e(s)).offset()}e.each(o.axis.split(""),function(e,n){var i=n=="x"?"Left":"Top",a=i.toLowerCase(),m="scroll"+i,p=r[m],h=t.max(r,n);if(c){f[m]=c[a]+(u?0:p-l.offset()[a]);if(o.margin){f[m]-=parseInt(s.css("margin"+i))||0;f[m]-=parseInt(s.css("border"+i+"Width"))||0}f[m]+=o.offset[a]||0;if(o.over[a])f[m]+=s[n=="x"?"width":"height"]()*o.over[a]}else{var v=s[a];f[m]=v.slice&&v.slice(-1)=="%"?parseFloat(v)/100*h:v}if(o.limit&&/^\d+$/.test(f[m]))f[m]=f[m]<=0?0:Math.min(f[m],h);if(!e&&o.queue){if(p!=f[m])d(o.onAfterFirst);delete f[m]}});d(o.onAfter);function d(e){l.animate(f,a,o.easing,e&&function(){e.call(this,i,o)})}}).end()};t.max=function(t,n){var i=n=="x"?"Width":"Height",a="scroll"+i;if(!e(t).is("html,body"))return t[a]-e(t)[i.toLowerCase()]();var o="client"+i,r=t.ownerDocument.documentElement,l=t.ownerDocument.body;return Math.max(r[a],l[a])-Math.min(r[o],l[o])};function n(e){return typeof e=="object"?e:{top:e,left:e}}})(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e}else{e(jQuery)}})(function(e){var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice,a,o;if(e.event.fixHooks){for(var r=t.length;r;){e.event.fixHooks[t[--r]]=e.event.mouseHooks}}e.event.special.mousewheel={version:"3.1.6",setup:function(){if(this.addEventListener){for(var e=n.length;e;){this.addEventListener(n[--e],l,false)}}else{this.onmousewheel=l}},teardown:function(){if(this.removeEventListener){for(var e=n.length;e;){this.removeEventListener(n[--e],l,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function l(t){var n=t||window.event,r=i.call(arguments,1),l=0,c=0,f=0,u=0;t=e.event.fix(n);t.type="mousewheel";if("detail"in n){f=n.detail*-1}if("wheelDelta"in n){f=n.wheelDelta}if("wheelDeltaY"in n){f=n.wheelDeltaY}if("wheelDeltaX"in n){c=n.wheelDeltaX*-1}if("axis"in n&&n.axis===n.HORIZONTAL_AXIS){c=f*-1;f=0}l=f===0?c:f;if("deltaY"in n){f=n.deltaY*-1;l=f}if("deltaX"in n){c=n.deltaX;if(f===0){l=c*-1}}if(f===0&&c===0){return}u=Math.max(Math.abs(f),Math.abs(c));if(!o||u<o){o=u}l=Math[l>=1?"floor":"ceil"](l/o);c=Math[c>=1?"floor":"ceil"](c/o);f=Math[f>=1?"floor":"ceil"](f/o);t.deltaX=c;t.deltaY=f;t.deltaFactor=o;r.unshift(t,l,c,f);if(a){clearTimeout(a)}a=setTimeout(s,200);return(e.event.dispatch||e.event.handle).apply(this,r)}function s(){o=null}});window.Modernizr=function(e,t,n){function i(e){p.cssText=e}function a(e,t){return i($.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function r(e,t){return!!~(""+e).indexOf(t)}function l(e,t,i){for(var a in e){var r=t[e[a]];if(r!==n)return i===!1?e[a]:o(r,"function")?r.bind(i||t):r}return!1}var s="2.7.1",c={},f=!0,u=t.documentElement,d="modernizr",m=t.createElement(d),p=m.style,h,v={}.toString,$=" -webkit- -moz- -o- -ms- ".split(" "),g={},b={},y={},w=[],_=w.slice,C,x=function(e,n,i,a){var o,r,l,s,c=t.createElement("div"),f=t.body,m=f||t.createElement("body");if(parseInt(i,10))while(i--)l=t.createElement("div"),l.id=a?a[i]:d+(i+1),c.appendChild(l);return o=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),c.id=d,(f?c:m).innerHTML+=o,m.appendChild(c),f||(m.style.background="",m.style.overflow="hidden",s=u.style.overflow,u.style.overflow="hidden",u.appendChild(m)),r=n(c,e),f?c.parentNode.removeChild(c):(m.parentNode.removeChild(m),u.style.overflow=s),!!r},k={}.hasOwnProperty,M;!o(k,"undefined")&&!o(k.call,"undefined")?M=function(e,t){return k.call(e,t)}:M=function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=_.call(arguments,1),i=function(){if(this instanceof i){var a=function(){};a.prototype=t.prototype;var o=new a,r=t.apply(o,n.concat(_.call(arguments)));return Object(r)===r?r:o}return t.apply(e,n.concat(_.call(arguments)))};return i}),g.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:x(["@media (",$.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n};for(var E in g)M(g,E)&&(C=E.toLowerCase(),c[C]=g[E](),w.push((c[C]?"":"no-")+C));return c.addTest=function(e,t){if(typeof e=="object")for(var i in e)M(e,i)&&c.addTest(i,e[i]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof f!="undefined"&&f&&(u.className+=" "+(t?"":"no-")+e),c[e]=t}return c},i(""),m=h=null,function(e,t){function n(e,t){var n=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function a(e){var t=v[e[p]];return t||(t={},h++,e[p]=h,v[h]=t),t}function o(e,n,i){n||(n=t);if($)return n.createElement(e);i||(i=a(n));var o;return i.cache[e]?o=i.cache[e].cloneNode():d.test(e)?o=(i.cache[e]=i.createElem(e)).cloneNode():o=i.createElem(e),o.canHaveChildren&&!u.test(e)&&!o.tagUrn?i.frag.appendChild(o):o}function r(e,n){e||(e=t);if($)return e.createDocumentFragment();n=n||a(e);var o=n.frag.cloneNode(),r=0,l=i(),s=l.length;for(;r<s;r++)o.createElement(l[r]);return o}function l(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function s(e){e||(e=t);var i=a(e);return g.shivCSS&&!m&&!i.hasCSS&&(i.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),$||l(e,i),e}var c="3.7.0",f=e.html5||{},u=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,d=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m,p="_html5shiv",h=0,v={},$;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",m="hidden"in e,$=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){m=!0,$=!0}})();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:f.shivCSS!==!1,supportsUnknownElements:$,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:s,createElement:o,createDocumentFragment:r};e.html5=g,s(t)}(this,t),c._version=s,c._prefixes=$,c.testStyles=x,u.className=u.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+w.join(" "):""),c}(this,this.document),function(e,t,n){function i(e){return"[object Function]"==p.call(e)}function a(e){return"string"==typeof e}function o(){}function r(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function l(){var e=h.shift();v=1,e?e.t?d(function(){("c"==e.t?E.injectCss:E.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),l()):v=0}function s(e,n,i,a,o,s,c){function f(t){if(!p&&r(u.readyState)&&(y.r=p=1,!v&&l(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&d(function(){b.removeChild(u)},50);for(var i in x[n])x[n].hasOwnProperty(i)&&x[n][i].onload()}}var c=c||E.errorTimeout,u=t.createElement(e),p=0,$=0,y={t:i,s:n,e:o,a:s,x:c};1===x[n]&&($=1,x[n]=[]),"object"==e?u.data=n:(u.src=n,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){f.call(this,$)},h.splice(a,0,y),"img"!=e&&($||2===x[n]?(b.insertBefore(u,g?null:m),d(f,c)):x[n].push(u))}function c(e,t,n,i,o){return v=0,t=t||"j",a(e)?s("c"==t?w:y,e,t,this.i++,n,i,o):(h.splice(this.i++,0,e),1==h.length&&l()),this}function f(){var e=E;return e.loader={load:c,i:0},e}var u=t.documentElement,d=e.setTimeout,m=t.getElementsByTagName("script")[0],p={}.toString,h=[],v=0,$="MozAppearance"in u.style,g=$&&!!t.createRange().compareNode,b=g?u:m.parentNode,u=e.opera&&"[object Opera]"==p.call(e.opera),u=!!t.attachEvent&&!u,y=$?"object":u?"script":"img",w=u?"script":y,_=Array.isArray||function(e){return"[object Array]"==p.call(e)},C=[],x={},k={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},M,E;E=function(e){function t(e){var e=e.split("!"),t=C.length,n=e.pop(),i=e.length,n={url:n,origUrl:n,prefixes:e},a,o,r;for(o=0;o<i;o++)r=e[o].split("="),(a=k[r.shift()])&&(n=a(n,r));for(o=0;o<t;o++)n=C[o](n);return n}function r(e,a,o,r,l){var s=t(e),c=s.autoCallback;s.url.split(".").pop().split("?").shift(),s.bypass||(a&&(a=i(a)?a:a[e]||a[r]||a[e.split("/").pop().split("?")[0]]),s.instead?s.instead(e,a,o,r,l):(x[s.url]?s.noexec=!0:x[s.url]=1,o.load(s.url,s.forceCSS||!s.forceJS&&"css"==s.url.split(".").pop().split("?").shift()?"c":n,s.noexec,s.attrs,s.timeout),(i(a)||i(c))&&o.load(function(){f(),a&&a(s.origUrl,l,r),c&&c(s.origUrl,l,r),x[s.url]=2})))}function l(e,t){function n(e,n){if(e){if(a(e))n||(c=function(){var e=[].slice.call(arguments);f.apply(this,e),u()}),r(e,c,t,0,l);else if(Object(e)===e)for(m in d=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(m)&&(!n&&!--d&&(i(c)?c=function(){var e=[].slice.call(arguments);f.apply(this,e),u()}:c[m]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),u()}}(f[m])),r(e[m],c,t,m,l))}else!n&&u()}var l=!!e.test,s=e.load||e.both,c=e.callback||o,f=c,u=e.complete||o,d,m;n(l?e.yep:e.nope,!!s),s&&n(s)}var s,c,u=this.yepnope.loader;if(a(e))r(e,0,u,0);else if(_(e))for(s=0;s<e.length;s++)c=e[s],a(c)?r(c,0,u,0):_(c)?E(c):Object(c)===c&&l(c,u);else Object(e)===e&&l(e,u)},E.addPrefix=function(e,t){k[e]=t},E.addFilter=function(e){C.push(e)},E.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",M=function(){t.removeEventListener("DOMContentLoaded",M,0),t.readyState="complete"},0)),e.yepnope=f(),e.yepnope.executeStack=l,e.yepnope.injectJs=function(e,n,i,a,s,c){var f=t.createElement("script"),u,p,a=a||E.errorTimeout;f.src=e;for(p in i)f.setAttribute(p,i[p]);n=c?l:n||o,f.onreadystatechange=f.onload=function(){!u&&r(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},d(function(){u||(u=1,n(1))},a),s?f.onload():m.parentNode.insertBefore(f,m)},e.yepnope.injectCss=function(e,n,i,a,r,s){var a=t.createElement("link"),c,n=s?l:n||o;a.href=e,a.rel="stylesheet",a.type="text/css";for(c in i)a.setAttribute(c,i[c]);r||(m.parentNode.insertBefore(a,m),d(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};function ajaxError(e,t,n){if(window.console){console.log(e);console.log(t);console.log(n)}}